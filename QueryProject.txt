CREATE DATABASE slink;

USE slink;

CREATE TABLE users(
id int primary key auto_increment,
nama_depan varchar(255),
nama_belakang varchar(255),
jenis_kelamin varchar(40),
no_telp varchar(40) unique,
profesi varchar(255),
username varchar(255) unique,
password varchar(255),
linkedin varchar(255),
waktu_registrasi datetime,
pertanyaan varchar(255),
jawaban varchar(255)
);

INSERT INTO users VALUES(NULL,'Raden','Surya','Pria','082134254223','Hunter',NULL,NULL,NULL,NOW(), NULL, NULL);
INSERT INTO users VALUES(NULL,'Flow','Aeb','Pria','082134256455','Caster',NULL,NULL,NULL,NOW(), NULL, NULL);

CREATE VIEW profile AS SELECT nama_depan, nama_belakang, jenis_kelamin, no_telp, profesi, username, linkedin, waktu_registrasi, pertanyaan, jawaban FROM users;

CREATE TABLE posts(
id int primary key auto_increment,
judul varchar(255),
deskripsi varchar(255),
link varchar(255),
waktu_upload datetime,
user_id int,
FOREIGN KEY(user_id) REFERENCES users(id) ON UPDATE CASCADE ON DELETE CASCADE
);

INSERT INTO posts VALUES(NULL, 'Cara Menjadi Ayam','Tutorial berubah wujud','link-a',NOW(),1);
INSERT INTO posts VALUES(NULL, 'Cara Menjadi Sapi','Tutorial berubah','link-a',NOW(),2);
INSERT INTO posts VALUES(NULL, 'Buat Dihapus','Hpus Kuy','link-hapus',NOW(),1);

CREATE TABLE comments(
id int primary key auto_increment,
komentar text,
post_id int,
user_id int,
FOREIGN KEY(user_id) REFERENCES users(id) ON UPDATE CASCADE ON DELETE CASCADE,
FOREIGN KEY(post_id) REFERENCES posts(id) ON UPDATE CASCADE ON DELETE CASCADE,
waktu_upload datetime
);

INSERT INTO comments VALUES(NULL,'Gagal jadi ayam...',1,2,NOW());